
< Portとは？ >


----------------------------------------------------------------------------------------------------------------------------------------------------------

< 【超ざっくり理解する】ポートとは？ >

    ポートとは一般的には「港」のことだ。
    
    しかし、IT業界で聞くポートは意味が違う。

    ITで扱うポートとは、データが外に出たり、入ったりするための扉のイメージだ。

    このページではポートについてざっくりわかるように説明しよう。


目次 [hide]

1 ざっくりと、ポートとは？
1.1 ポートは港
1.2 マンション
2 もう少し正確に言うと、ポートはサービスの窓口
3 注意点
4 こちらも参照してほしい


1. ざっくりと、ポートとは？


1-1. ポートは港

    ポートとは元来「港」のことだ。港は船が町に入るために必要な空間で、海と町との出入り口になる。

    IT業界で使われるポートも似たようなイメージだ。
    
    港では、どの荷物をどの場所で下すかは決まっている。
    
    番号がついていたりもきっとするだろう。

    ITも同じで、インターネット全体を海として、コンピュータを町だとすると、インターネットから来るデータを下す場所が決まっている。

    Webページ閲覧のデータは○番港、メールは○番港、とそんな感じだ。

    これが「ポート」に当たる。



1-2. マンション

    他にもマンションでまとめてみるとわかりやすいだろう。

    ネットワーク通信で必要な「プロトコル」「IPアドレス」と「ポート番号」が必要だ。

    マンションで言うと、「どのような方法」で「どこのマンション（コンピュータ）」の「何号室（何番ポート）」を使うか、という形にいいかえることが出来る。


        Protocol は、方法・Method・通信ルール(どの通信ルール？)

        IP-Address は、Computerの識別・特定

        Port-番号は、さらにどこの窓口(Interface)に届けるか？



2. もう少し正確に言うと、ポートはサービスの窓口

    ポートは「サーバアプリケーションを特定する時に使用する番号」であり「サーバ上で展開されているサービスの窓口」だ。

    例えばhttpプロトコルは、80番を使用するのが一般的である。

    ポートが開放されている場合部屋の窓はあけっぱなしとなる。
    
    サーバとしては相手にサービスを提供するために、窓を常にあけておかなければならない。

    例えばhttp一般的なWebサービスを提供する場合80番ポートを開放する必要がある。
    
    http通信で必要な窓をあける作業となる。

    ではもしポートが閉ざされたままの場合はどうだろう。
    
    サーバの窓口はしまっていることになる。
    
    つまり営業停止なのでサービスを提供できなくなる。
    
    なので「サービスに応じて必要な窓口をあける作業」がポート開放である。


3. 注意点

    窓口を空けておくということは、窓に鍵をかけないということでもある。

    当然情報を盗もうとする泥棒、つまり「クラッカー」などにねらわれやすい状態にあるということになる。

    この状態は非常によくないので、無闇にポートを開放してはならない。
    
    セキュリティーの対策をきっちりとたてて最小限のポートを開放するようにしよう。



【超ざっくり理解する】ポートとは？
https://eng-entrance.com/network-port-2


【すぐわかる】CentOSのポート開放のやり方
https://eng-entrance.com/linux-centos-port


----------------------------------------------------------------------------------------------------------------------------------------------------------

< 【3分で把握】ポート番号とは？と代表的なポート番号まとめ >

    ポートとは、ネットワークでデータを通信するための扉のようなものだと思うとわかりやすいだろう。ポート番号はその扉の番号だ。

    それぞれプログラムの種類によって、使うポート（扉）が違う。
    
    例えば、メールを送るにはこの扉、メールを受け取るにはこの扉、Webページを見てもらうのはこの扉、などと決まっているわけだ。

    このページではポートとポート番号について初心者向けにわかりやすくご紹介しよう。


目次 [hide]

1 そもそもポートとは？
1.1 ポート番号
2 代表的なポート番号とプロトコル
3 ウェルノウンポート番号
4 レジスタードポート番号
5 その他のポート番号
6 ポートの開放とセキュリティ
6.1 ポートを閉じる方法


1. そもそもポートとは？

    実際TCPやUDPで通信を行うときは、コンピュータ一台という単位ではなく「プログラム単位」
    
    つまり「プロセスやスレッド単位」で通信が行われる。
    
    そのためプロセス同士、正しく受け渡しをする必要がある。

    このとき通信しているプロセスには「ポート番号」というものが割り振られる。
    
    プロセスやスレッドはこのポート番号を目印にして、どのアプリケーションとどのアプリケーションが通信をとっているのかを判別することになる。


2. ポート番号

    IPアドレスを建物の住所に例えるなら、ポート番号は「部屋の番号は何号室か？」という例えになる。
    
    コンピュータネットワークにおいて、プロトコル、IPアドレスとポート番号はまとめると、「どのような方法」で「どこ」の「何号室」に通信をとるのか？という形にいいかえることが出来る。

    通信において重要なポート番号だがポートを開くということは、特定の部屋の扉をあけはなっている状態に等しいので、サービスを提供するサーバでもないかぎり、基本的に不必要なポートは開かないように設定しておかなければならない。



3. 代表的なポート番号とプロトコル

    それぞれ「どの様なプロトコルがどの様なポート番号で運用されるのか？」代表的な例をあげると以下のようになる。

        TCP 20 : FTP (データ)
        TCP 21 : FTP (制御)
        TCP 22 : SSH
        TCP 23 : Telnet
        TCP 25 : SMTP
        UDP 53 : DNS
        UDP 67 : DHCP（サーバ）
        UDP 68 : DHCP（クライアント）
        TCP 80 : HTTP
        TCP 110 : POP3
        UDP 123 : NTP
        TCP 443 : HTTPS

        WELL KNOWN PORT NUMBERS 0~1023

    ポートとIPアドレスとプロトコルの例をあげるとWebサーバなどだろう。

    特定のIPアドレス上で公開されているサーバ上で、HTTPというプロトコルにそったアプリケーション、Apacheなどが80番ポートで、クライアントとの通信を待機し、要求に応じてWebページの情報を送信するといった流れだ。

    他のサービスも同様に特定のサーバ上でプロトコルを実装したアプリケーションを任意ポートもしくはウェルノウンポートを開放しサービスを提供することになる。


4. ウェルノウンポート番号: WELL KNOWN PORT NUMBERS 0~1023


    実際ポート自体は0から65535まで存在するが、そのなかでも0~1023までを「ウェルノウンポート番号」という。これらはIANAという団体により管理されている。

    「よく知られているポート番号」というまさしくそのままの意味だ。

    TCP/IPやUDPにおいて通信で利用されるポート番号のうち、メジャーなサービスやプロトコルが利用するために予約されているポート番号のことである。

    80がHTTP、22がSSHとあるように、メジャーなサービスはポート番号が一般的に決め打ちされている。

    それらはサービスごとに設定ファイルを編集し、待受のポート番号を変更することも可能だ。
    
    セキュリティの関係上意図的にポート番号を変更することもしばしあるが、基本的にはウェルノウンポート番号を使用するようにしよう。


5. レジスタードポート番号

    1024~49151こちらもIANAで管理されている。

    特定のアプリケーションなどが使用することになっているポート郡である。
    
    IANAが登録を受け付け、公開している。


6. その他のポート番号

    49152~65535はユーザが自由にとりあつかえるポート番号となっている。
    
    IANAに登録をする必要もない。

    ポート番号に関しては「実際どのサービスをどのポートで動かすのか？」というのは絶対の決め打ちが存在するわけではないので、任意で管理、わりふって使用することも出来る。


7. ポートの開放とセキュリティ

    昨今のコンピュータは処理力が非常に高く、パーソナルなマシンの上でもサーバとして常駐するアプリケーションも増えている。

    サーバとして機能するアプリケーションの場合、ローカル内だけでなく外部からの情報にも応答するようになっている場合がほとんどだろう。
    
    このサーバとして機能するアプリケーション、サーバアプリケーションはサービスを提供するため必然的にポートを開放することになる。

    しかしサーバアプリケーションにセキュリティホールがあった場合、最悪サーバが乗っ取られる、もしくはサービスを提供できなくなる場合もある。
    
    サーバとして機能するアプリケーションは慎重に検討する必要がある。

    そのほかにも、サーバとして動作しているコンピュータの場合「どのポートが開放されているのか？」「意図しないポートは開いていないか？」などを確認する必要がある、
    
    実働前にペネトレーションテストを行い、実際にポートスキャンし、状態を把握することを心がけよう。


8. ポートを閉じる方法

    Firewallを使うのが一般的だ。下記の記事で詳しく解説している。


【丁寧解説】Linuxファイアウォール iptablesの使い方 => https://eng-entrance.com/linux-firewall



< 参考・引用 >

【3分で把握】ポート番号とは？と代表的なポート番号まとめ
https://eng-entrance.com/network-port









