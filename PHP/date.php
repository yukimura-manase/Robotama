<?php

// < PHPã®æ™‚é–“æ“ä½œã¾ã¨ã‚ğŸ”¥ >


// < PHPã§æ—¥ä»˜é–¢æ•°ã‚’ä½¿ã„ã“ãªã™ï¼ˆdate, strtotimeï¼‰>

// 1. dateé–¢æ•°

// dateé–¢æ•°ã¯å¼•æ•°ã‚’1ã¤ï¼ˆor2ã¤ï¼‰æŒã¦ã‚‹

//     ç¬¬1å¼•æ•°ï¼šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆstringï¼‰
//     ç¬¬2å¼•æ•°ï¼šã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆintï¼‰

//     å¼•æ•°1ã¤ã®æ™‚ï¼šã€Œç¾åœ¨ã®æ™‚åˆ»ã€ã‚’ã€ŒæŒ‡å®šã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ã§å‡ºåŠ›
//     å¼•æ•°2ã¤ã®æ™‚ï¼šã€Œç¬¬2å¼•æ•°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚’ã€ŒæŒ‡å®šã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ã§å‡ºåŠ›

//     æˆ»ã‚Šå€¤ã¯string


//     date_default_timezone_set('Asia/Tokyo');ï¼šã¾ãšã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®è¨­å®šã‚’ã™ã‚‹ã“ã¨ã€‚
        
//     Yï¼šå¹´ï¼ˆ4æ¡è¡¨è¨˜ï¼‰
//     yï¼šå¹´ï¼ˆ2æ¡è¡¨è¨˜ï¼‰
//     mï¼šæœˆï¼ˆ2æ¡è¡¨è¨˜ï¼‰
//     nï¼šæœˆï¼ˆå…ˆé ­ã«ã‚¼ãƒ­ã¤ã‘ãªã„ï¼‰
//     dï¼šæ—¥ï¼ˆ2æ¡è¡¨è¨˜ï¼‰
//     Hï¼šæ™‚é–“ï¼ˆ24æ™‚é–“å˜ä½ï¼‰
//     hï¼šæ™‚é–“ï¼ˆ12æ™‚é–“å˜ä½ï¼‰
//     iï¼šåˆ†
//     sï¼šç§’
//     tï¼šæŒ‡å®šã—ãŸæœˆã®æ—¥æ•°
//     wï¼šæ›œæ—¥ç•ªå·ï¼ˆ0[æ—¥æ›œ]ã‹ã‚‰6[åœŸæ›œ]ã®å€¤ï¼‰
//     .ï¼šæ–‡å­—åˆ—é€£çµ
//     \nï¼šæ”¹è¡Œ


// 2. strtotimeé–¢æ•°

// strtotimeé–¢æ•°ã¯å¼•æ•°ã‚’1ã¤ï¼ˆor 2ã¤ï¼‰æŒã¦ã‚‹

//     ç¬¬1å¼•æ•°ï¼šæ—¥æ™‚ï¼ˆstringï¼‰ã€‚ç›¸å¯¾æ—¥æ™‚ã‚„çµ¶å¯¾æ—¥æ™‚ã‚’æŒ‡å®šå¯èƒ½ã€‚
//     ç¬¬2å¼•æ•°ï¼šã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆintï¼‰

//     å¼•æ•°1ã¤ã®æ™‚ï¼šã€Œç¾åœ¨ã€ã‚’åŸºæº–ã¨ã—ãŸã€ã€Œç¬¬1å¼•æ•°ã®æ—¥æ™‚ã€ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å‡ºåŠ›
//     å¼•æ•°2ã¤ã®æ™‚ï¼šã€Œç¬¬2å¼•æ•°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚’åŸºæº–ã¨ã—ãŸã€ã€Œç¬¬1å¼•æ•°ã®æ—¥æ™‚ã€ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å‡ºåŠ›
    
//     æˆ»ã‚Šå€¤ã¯int



// < å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥ >

// PHPã§æ—¥ä»˜é–¢æ•°ã‚’ä½¿ã„ã“ãªã™ï¼ˆdate, strtotimeï¼‰
// https://qiita.com/shuntaro_tamura/items/b7908e6db527e1543837



// < PHP æ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ >

    // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ	å†…å®¹	å‡ºåŠ›çµæœ(ä¾‹)
    // Y	è¥¿æš¦(4æ¡)	2017
    // y	è¥¿æš¦(2æ¡)	17
    // l	ã†ã‚‹ã†å¹´: 1ã€å¹³å¹´: 0	0
    // m	æœˆ(0åŸ‹ã‚)	08
    // n	æœˆ(0åŸ‹ã‚ç„¡ã—)	8
    // M	æœˆ è‹±èªè¡¨è¨˜	August
    // F	æœˆ è‹±èªè¡¨è¨˜(ç•¥)	Aug
    // d	æ—¥ä»˜(0åŸ‹ã‚)	08
    // j	æ—¥ä»˜(0åŸ‹ã‚ç„¡ã—)	8
    // l	æ›œæ—¥ è‹±èªè¡¨è¨˜	Monday
    // D	æ›œæ—¥ è‹±èªè¡¨è¨˜(ç•¥)	Mon
    // w	æ›œæ—¥ (æ—¥æ›œ: 0 â†’ åœŸ: 6)	1
    // H	æ™‚åˆ» 24æ™‚é–“è¡¨è¨˜ (0åŸ‹ã‚)	09
    // G	æ™‚åˆ» 24æ™‚é–“è¡¨è¨˜ (0åŸ‹ã‚ç„¡ã—)	9
    // h	æ™‚åˆ» 12æ™‚é–“è¡¨è¨˜ (0åŸ‹ã‚)	09
    // g	æ™‚åˆ» 12æ™‚é–“è¡¨è¨˜ (0åŸ‹ã‚ç„¡ã—)	9
    // i	åˆ†	02
    // s	ç§’	02


// < å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥ >

// phpã§ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ï¼
// https://blog.codecamp.jp/php-datetime


// ----------------------------------------------------------------------------------------------------------------------------------------

// [ 1. åŸºæœ¬çš„ãªæ™‚é–“æ“ä½œ ]

// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®šã™ã‚‹
date_default_timezone_set('Asia/Tokyo');


// 1. ç¾åœ¨ç³»çµ±ã®æ™‚é–“ã‚’å–å¾—ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

// ç¾åœ¨ã®å¹´ã‚’å–å¾—ã™ã‚‹
$nowyear = date("Y");
echo $nowyear . "\n";
// 2022

// ç¾åœ¨ã®ã€Œå¹´/æœˆ/æ—¥ã€ã‚’å–å¾—ã™ã‚‹
$date = date("Y/m/d");
echo $date . "\n";
// 2022/12/15

// ç¾åœ¨ã®ã€Œæ™‚:åˆ†:ç§’ã€ã‚’å–å¾—ã™ã‚‹
$hms = date("H:i:s");
echo $hms . "\n";
// 

// ç¾åœ¨ã®ã€Œæ—¥æ™‚ã€(å¹´æœˆæ—¥æ™‚åˆ†ç§’)ã‚’å–å¾—ã™ã‚‹
$nowTime = date("Y-m-d H:i:s");
echo $nowTime . "\n";


// æŒ‡å®šã—ãŸæ—¥æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹ => éå»ãƒ»æœªæ¥ç³»ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹

$pass_timestamp = strtotime("2018-04-01");
$pass_date = date("Y-m-d H:i:s", $pass_timestamp);

echo 'éå»ã®æ—¥ä»˜' . "\n";
echo $pass_timestamp . "\n";
echo $pass_date . "\n";

// éå»ã®æ—¥ä»˜
// 1522508400
// 2018-04-01 00:00:00


$future_timestamp = strtotime("2025-04-01");
$future_date = date("Y-m-d H:i:s", $future_timestamp);

echo 'æœªæ¥ã®æ—¥ä»˜' . "\n";
echo $future_timestamp . "\n";
echo $future_date . "\n";

// æœªæ¥ã®æ—¥ä»˜
// 1743433200
// 2025-04-01 00:00:00



$now_timestamp = strtotime('now');
$now_date = date("Y-m-d H:i:s", $now_timestamp);

echo 'ç¾åœ¨ã®æ—¥ä»˜' . "\n";
echo $now_timestamp . "\n";
echo $now_date . "\n";
// ç¾åœ¨ã®æ—¥ä»˜
// 1671091366
// 2022-12-15 17:02:46



echo 'ç¾åœ¨ã‹ã‚‰1æ—¥å¾Œã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹' . "\n";
echo date('Y/m/d H:i:s',strtotime("+1 day")) . "\n";


$before_day = 5;

echo 'ç¾åœ¨ã‹ã‚‰5æ—¥å‰ã®æ—¥ä»˜ã‚’å–å¾—ã™ã‚‹' . "\n";
echo date("Y-m-d H:i:s", strtotime("-$before_day day")) . "\n";


echo 'ç¾åœ¨ã‹ã‚‰1é€±é–“å¾Œã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—' . "\n";
echo date('Y/m/d H:i:s',strtotime("+1 week")) . "\n";


echo 'ç¾åœ¨ã‹ã‚‰1ã‚«æœˆå¾Œã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—' . "\n";
echo date('Y/m/d H:i:s',strtotime("+1 month")) . "\n";


echo 'ç¾åœ¨ã‹ã‚‰+1ç§’ã€+2åˆ†ã€+3æ™‚é–“ã€+4æ—¥ã€+5ã‚«æœˆã€+6å¹´ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—' . "\n";
echo date('Y/m/d H:i:s',strtotime("+1 seconds +2 min +3 hours +4 day +5 month +6 year")) . "\n";

echo 'æ¬¡ã®æœ¨æ›œæ—¥ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—' . "\n";
echo date('Y/m/d H:i:s',strtotime("next Thursday")) . "\n";


echo 'å‰ã®æœˆæ›œæ—¥ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—' .  "\n";
echo date('Y/m/d H:i:s',strtotime("last Monday")) . "\n";

echo '--------------------------------------------------------------' . "\n";



// ã‚ãŸã‚Šã¾ãˆã§ã™ãŒã€æ™‚é–“ã®æ¯”è¼ƒè¨ˆç®—ã®ãŸã‚ã«ã¯ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—(æ•°å€¤åŒ–)ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


$pass_timestamp = strtotime("2018-04-01");
$now_timestamp = strtotime('now');
$future_timestamp = strtotime("2025-04-01");


var_dump($pass_timestamp <= $now_timestamp);
// bool(true)

var_dump($future_timestamp <= $pass_timestamp);
// bool(false)

var_dump(($pass_timestamp <= $now_timestamp) && ($now_timestamp <= $future_timestamp));
// bool(true)


// < æŒ‡å®šã—ãŸæ—¥æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹ >


    // æ–‡å­—åˆ—ã®æ—¥æ™‚ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹
    // strtotimeé–¢æ•°ã«æ–‡å­—åˆ—ã§æ—¥ä»˜ã‚’æ¸¡ã™ã¨ã€ãã®æ™‚åˆ»ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

    // ã‚³ãƒ¼ãƒ‰ä¾‹
    // strtotime("2018-01-25");
    // å‡ºåŠ›çµæœ
    // int(1516806000)
    // å–å¾—ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯dateé–¢æ•°ãªã©ã§ç°¡å˜ã«ç‰¹å®šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

    // ã‚³ãƒ¼ãƒ‰ä¾‹
    // // æ—¥ä»˜ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—
    // $timestamp = strtotime("2018-01-25");

    // // æŒ‡å®šã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å‡ºåŠ›
    // echo date("Y-m-d H:i:s", $timestamp);
    // å‡ºåŠ›çµæœ
    // 2018-01-25 00:00:00




    // ä½¿ç”¨ã§ãã‚‹æ™‚åˆ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
    // strtotimeé–¢æ•°ã§ã¯æ™‚åˆ»ã®æ–‡å­—åˆ—ã‚’ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«å¤‰æ›ã™ã‚‹ã«å½“ãŸã£ã¦ã€ç‰¹å®šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

    // ã‚³ãƒ¼ãƒ‰ä¾‹
    // // OK
    // $timestamp = strtotime("2018-01-25");
    // $timestamp = strtotime("2018-01-25 01:15:00");
    // $timestamp = strtotime("2018/1/25 01:15:00");
    // $timestamp = strtotime("2018-Jan-20 01:15:00");

    // // NG
    // $timestamp = strtotime("2018.01.25 01:15:00");
    // $timestamp = strtotime("2018å¹´01æœˆ25æ—¥ 01:15:00");



    // æŒ‡å®šã—ãŸæ—¥æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—ã™ã‚‹
    // https://gray-code.com/php/get-the-timestamp-from-specify-time/



// ----------------------------------------------------------------------------------------------------------------------------------------


// [ 2. ä¼‘æ—¥ã®åˆ¤å®š => Ver. åœŸæ—¥ã®åˆ¤å®š(æ›œæ—¥ã®åˆ¤å®š) ]

// æ›œæ—¥é…åˆ—
$dayofweek_array = [
    'æ—¥', //0
    'æœˆ', //1
    'ç«', //2
    'æ°´', //3
    'æœ¨', //4
    'é‡‘', //5
    'åœŸ', //6
];

// æ›œæ—¥ã”ã¨ã®ç•ªå·ã‚’å–å¾—ã™ã‚‹ï¼ => 
$dayofweek_num = date('w');

echo $dayofweek_num . "\n";
// 4

//æ—¥æœ¬èªã§æ›œæ—¥ã‚’å‡ºåŠ›
echo $dayofweek_array[$dayofweek_num] . 'æ›œæ—¥' . "\n";
// æœ¨æ›œæ—¥

$rest_date_flag = false;

// 0(æ—¥æ›œ)ã‹6(åœŸæ›œ)ãªã‚‰ä¼‘æ—¥åˆ¤å®š
if($dayofweek_num == 0 || $dayofweek_num == 6){

    echo "ä¼‘ã¿ã‚„ã‚“ï¼" . "\n";
    $rest_date_flag = true;
};

$isHoliday = $rest_date_flag ? 'true' : 'false';

echo "ä¼‘ã¿ãƒ•ãƒ©ã‚°: {$isHoliday}" . "\n";
// ä¼‘ã¿ãƒ•ãƒ©ã‚°: false

// ----------------------------------------------------------------------------------------------------------------------------------------

// [ 3. æ·±å¤œã®åˆ¤å®š ]

// æ·±å¤œã®å®šç¾©ã‚’ä½•æ™‚ã‹ã‚‰ä½•æ™‚ã«ã™ã‚‹ã‹ã«ã‚ˆã‚‹ã€ã€ã€ => ã²ã¨ã¾ãš0æ™‚ã‹ã‚‰4æ™‚ãã‚‰ã„ã¾ã§ã‚’æ·±å¤œã¨ã—ã¦åˆ¤å®šã™ã‚‹ï¼

// æ™‚é–“ã®æ¯”è¼ƒ(æ•°å€¤ã®æ¯”è¼ƒ)ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’

// [ 4ãƒ‘ãƒ¼ã‚¿ãƒ³ã®æ™‚åˆ»ã®è¡¨è¨˜æ–¹æ³•ãŒã‚ã‚‹ï¼ ]
// H	æ™‚åˆ» 24æ™‚é–“è¡¨è¨˜ (0ã‚ã‚Š)	08
// G	æ™‚åˆ» 24æ™‚é–“è¡¨è¨˜ (0ç„¡ã—)	8
// h	æ™‚åˆ» 12æ™‚é–“è¡¨è¨˜ (0ã‚ã‚Š)	08
// g	æ™‚åˆ» 12æ™‚é–“è¡¨è¨˜ (0ç„¡ã—)	8

// æ™‚é–“ã®è¡¨è¨˜ã¯ã€ã©ã‚Œã‚’æ¡ç”¨ã™ã‚‹ã‹ï¼Ÿ

$nowtime = date("H:i:s");   // H	æ™‚åˆ» 24æ™‚é–“è¡¨è¨˜ (0-åŸ‹ã‚)	09
$num_nowtime = strtotime($nowtime);

echo $nowtime . "\n";     
echo "æ•°å€¤åŒ–: $num_nowtime" . "\n";
// 15:38:50
// æ•°å€¤åŒ–: 1671086330


$midnight_start = date("22:00:00");
$num_midnight_start = strtotime($midnight_start);

echo($midnight_start). "\n";
echo("æ•°å€¤åŒ–: $num_midnight_start"). "\n";
// 22:00:00
// æ•°å€¤åŒ–: 1671109200

$midnight_finish = date("05:00:00");
$num_midnight_finish = strtotime($midnight_finish);
echo($midnight_finish). "\n";
echo("æ•°å€¤åŒ–: $num_midnight_finish"). "\n";
// 05:00:00
// æ•°å€¤åŒ–: 1671048000


// "00:00:00" < nowtime < "04:00:00"
$midnight_flag = ($num_midnight_start <= $num_nowtime &&  $num_nowtime <= $num_midnight_finish) ? true : false;


if($midnight_flag) echo("æ·±å¤œã‚„ã‚“ï¼"). "\n";
else echo("æ·±å¤œã˜ã‚ƒãªã„ã‚ˆï¼"). "\n";
// æ·±å¤œã˜ã‚ƒãªã„ã‚ˆï¼  





// < å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥ >


// 1. PHP-Manual: date
// https://www.php.net/manual/ja/function.date.php


// 2. PHP-Manual: strtotime
// https://www.php.net/manual/ja/function.strtotime.php



// 3. PHP ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®å–å¾—ã¨æ—¥æ™‚ã®å–å¾—
// https://wepicks.net/phpsample-date-timest_now/



// ----------------------------------------------------------------------------------------------------------------------------------------








