

< php.ini の場所はどこ？ php.iniはどこにあるのか？ >

1. phpinfoを見る

    1-1. phpinfoをwebで見る

        ドキュメントルート配下に下記を記載し、web上から確認。

        echo phpinfo();


    1-2. コンソール上で実行して確認

        C:\Users\Robotama\PHP・Laravel関連\PHP-関連> php -r "echo phpinfo();" | grep "php.ini"

        # [ 実行結果 ]
        Configuration File (php.ini) Path =>
        Loaded Configuration File => C:\php-7.4.27\php.ini


2. phpのオプションから探す


    2-1. --iniオプションを使う

        php --ini

        C:\Users\Robotama\PHP・Laravel関連\PHP-関連> php --ini

        # [ 実行結果 ]
        Configuration File (php.ini) Path:
        Loaded Configuration File:         C:\php-7.4.27\php.ini
        Scan for additional .ini files in: (none)
        Additional .ini files parsed:      (none)


    2-2. -iオプションを使う

        php -i | grep php.ini


        C:\Users\Robotama\PHP・Laravel関連\PHP-関連> php -i | grep php.ini

        # [ 実行結果 ]
        Configuration File (php.ini) Path =>  
        Loaded Configuration File => C:\php-7.4.27\php.ini



[ 参考・引用🔥 ]

1. もういい加減覚えよう。php.iniはどこにあるのか
https://qiita.com/ritukiii/items/624eb475b85e28613a70


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

< Allowed memory size of XXX bytes exhausted (tried to allocate XXX bytes) エラーの原因と解決方法について解説 | PHPのメモリー不足🔥 >


Allowed memory size of 134217728 bytes exhaustedエラーって時々みます。

これはphpに割り当てられたメモリが全部使われちゃったよ〜っていうエラー。

これはプログラムだけの問題ではない可能性が高いので、幾つか対策をしなければいけません。その対処法を５つまとめました。



php.ini のメモリー設定・メモリ上限の設定を拡張する。


memory_limit = 128M

最初は128メガになっているかと思うので、ここを変えてあげてください。

このあと、Web-Server を再起動を行わなければいけないので注意！

apache環境ならapache
nginxならphp-fpmとなるようです。


[ Error-解決🔥 ]


php.ini のメモリ設定を「 memory_limit = 1G 」にして、無事、解決しました。


[PHP]

memory_limit = 1G



[ 他にできるメモリ不足の対策 ]

1. そもそもメモリが枯渇しないような、メモリが枯渇しないようなコードにする



2. ini_set関数で一時的にメモリ上限を上げる

    こいつを使用するとphp.iniの設定値を一時的に変更してくれます。


        <?php
        ini_set("memory_limit", "3G");


    これで特定のファイルにおいては一時的にメモリを引き上げてphpを実行できるようになりました


3. unsetを駆使する

    確保されたメモリが削除処理されなかった場合、メモリリークといって処理終わってんのにそのプログラムがメモリ食ってる状況になっちゃいます。

    ちなみにphpでは一連の処理が終わると、自動的にメモリを開放してくれます。

    じゃあ、やんなくていいのかというとそういうわけでもないようで。
    
    非常に長い処理のなかとか、長いforeachの処理のなかとかだとunset関数で変数を初期化してやったほうがいい場合もあるようです。


        unset($data);


これらの中で対処法が見つかればいいなあって感じですね





[ 参考・引用🔥 ]

1. 【PHP】Allowed memory size of *** bytes exhaustedエラーの対処法まとめ
https://qiita.com/P2eFR6RU/items/9370011fe6cdb884769f








