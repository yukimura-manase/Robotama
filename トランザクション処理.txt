
[ トランザクションとは？ コミットとは？ ロールバックとは？ 初心者でもわかるように説明 ]

具体的なコマンド操作については触れずに、概念の理解を深めましょう。

「トランザクション」「コミット」「ロールバック」の3点セットはデータベースの話でよく出てきます。


1. トランザクションとは？

トランザクションは「ここからここまでワンセット」な処理単位です。

    「分割不可な一連の処理」です。


「トランザクション」と言う「処理のハッピーセット」は、最終的に「COMMIT（コミット）」か「ROLLBACK（ロールバック）」で終了します。

    
    コミットは一連の処理をまとめて確定し、ロールバックはまとめて処理を取り消すコマンドです。



2. コミットとは？


トランザクション処理の結果を確定させる処理を「コミット」と言います。
        

トランザクション処理は「ここからここまでワンセット」な処理です。



当たり前ですが、やっている途中はやりかけです。対外的には、やったことには、なっていません。

コミットをすることによって、対外的にも、やったことになります。

トランザクション処理の結果が本体に反映されます。


一連の「ここからここまでワンセット」な処理が終わり「やるべきことはやり終わったから、やり終わったことにするよ！」と対外的に宣言するのがコミットです。



コミットの考え方は、Gitのコミットと同じ考え方ですね🔥



3. ロールバック （Rollback）とは？

    トランザクションの開始地点まで処理した結果を取り消して、戻ること。

        => トランザクション処理の取り消し🔥


    データベース処理において、現在処理中のトランザクションを中断し、トランザクション処理を開始する以前の状態にデータベースを戻す処理のこと。

    トランザクション処理途中でエラーが発生した場合など、データベースの整合性を維持するためにロールバックが実行される。



    やりかけの「ここからここまでワンセット」な処理を取り消して、何もしなかった状態に戻すのが「ロールバック」です。


    処理というのは、いつでも上手くいくとは、かぎりません。

    トランザクション処理も同じです。
    
    処理中に何らかの理由により失敗することがあります。

    処理が失敗するのは仕方ありません。ですが、処理が途中の状態で止まってしまうのは、中途半端です。

    そこで、途中までの処理結果を捨てて、トランザクション開始前の状態に戻します。

    「中途半端な状態で残るくらいなら何も残ってない方がマシだ！」の心意気です。

    この「やりかけの処理結果を捨てて、処理開始前の状態に戻す」作業がロールバックです。

    


参考・引用

1. 【初級】新人SEのためのSQLの基礎　第5回　トランザクションとカーソルにまつわる注意点
https://xtech.nikkei.com/it/article/COLUMN/20060328/233487/


ロールバック (rollback)とは
https://wa3.i-3-i.info/word143.html


ロールバック とは？ - Insider's Computer Dictionary - ITmedia
https://atmarkit.itmedia.co.jp/icd/root/60/22096960.html




