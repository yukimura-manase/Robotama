
< ã€MySQLãƒãƒ³ã‚ºã‚ªãƒ³è¬›åº§ã€‘ MySQL (MariaDB)ã®åŸºæœ¬çš„ãªæ“ä½œæ–¹æ³•ã¾ã¨ã‚ğŸ”¥ >

[ 1. Login/Logouté–¢é€£ã®æ“ä½œ ]


1. MySQL (MariaDB) ã«Loginã™ã‚‹ => DBã‚’ç›´æ¥æ“ä½œã™ã‚‹ãŸã‚ã«ã€Loginã™ã‚‹ğŸ”¥

# localhostã®MySQLã‚µãƒ¼ãƒã«æ¥ç¶šã™ã‚‹å ´åˆ
$ mysql -u [ãƒ¦ãƒ¼ã‚¶ãƒ¼å] -p

    mysql -u root -p 

    # Passwordã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€å…¥åŠ›ã—ã¦Enter
    Enter password: robotama
        
    Welcome to the MariaDB monitor.  Commands end with ; or \g.
    Your MySQL connection id is 4
    Server version: 5.7.36-log MySQL Community Server (GPL)

    Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

    MySQL [(none)]>


    # ã€Œ MySQL [(none)]> ã€ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€DBã«å…¥ã£ã¦ã„ã¾ã™ğŸ”¥


2. MySQL (MariaDB)ã‹ã‚‰ã®Logout

\q
quit
exit





3. MySQL ã«DataBaseåæŒ‡å®šã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ğŸ”¥

    mysql -u root -p RobotamaDB

    Users\Robotama\Desktop> mysql -u root -p RobotamaDB
    Enter password: ********
    Welcome to the MariaDB monitor.  Commands end with ; or \g.
    Your MySQL connection id is 7
    Server version: 5.7.36-log MySQL Community Server (GPL)

    Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

    MySQL [RobotamaDB]>




[ 2. ãƒ˜ãƒ«ãƒ—ğŸ”¥ ]

MySQL (MariaDB)ã«Loginã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã€

help
\h

# [ å®Ÿè¡Œçµæœ ]
General information about MariaDB can be found at
http://mariadb.org

List of all client commands:
Note that all text commands must be first on line and end with ';'
?         (\?) Synonym for `help'.
clear     (\c) Clear the current input statement.
connect   (\r) Reconnect to the server. Optional arguments are db and host.
delimiter (\d) Set statement delimiter.
ego       (\G) Send command to MariaDB server, display result vertically.
exit      (\q) Exit mysql. Same as quit.
go        (\g) Send command to MariaDB server.
help      (\h) Display this help.
notee     (\t) Don't write into outfile.
print     (\p) Print current command.
prompt    (\R) Change your mysql prompt.
quit      (\q) Quit mysql.
rehash    (\#) Rebuild completion hash.
source    (\.) Execute an SQL script file. Takes a file name as an argument.
status    (\s) Get status information from the server.
tee       (\T) Set outfile [to_outfile]. Append everything into given outfile.
use       (\u) Use another database. Takes database name as argument.
charset   (\C) Switch to another charset. Might be needed for processing binlog with multi-byte charsets.
warnings  (\W) Show warnings after every statement.
nowarning (\w) Don't show warnings after every statement.

For server side help, type 'help contents'



[ 2. DBã®æ“ä½œç³»çµ±ğŸ”¥ ]

2-1. DBã®ç¢ºèªãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§ã®è¡¨ç¤º

MariaDBã«å…¥ã£ãŸçŠ¶æ…‹ã§æ¬¡ã®MySQL-CLIã‚’å®Ÿè¡Œã™ã‚‹ğŸ”¥

MySQL [(none)]> show databases;

+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.282 sec)


2-2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¿½åŠ (RobotamaDB ã‚’è¿½åŠ ã™ã‚‹å ´åˆ)


MySQL [(none)]> create database RobotamaDB;
Query OK, 1 row affected (0.067 sec)


MySQL [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| robotamadb         |
| sys                |
+--------------------+
5 rows in set (0.001 sec)



2-3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®é¸æŠ(RobotamaDB ã‚’é¸æŠã™ã‚‹å ´åˆ)


MySQL [(none)]> use robotamadb;
Database changed
MySQL [robotamadb]>




[ 3. Tableã®æ“ä½œç³»çµ±ğŸ”¥ ]


3-1. ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ã®è¡¨ç¤º

MySQL [robotamadb]> show tables;
Empty set (0.038 sec)


ã‚‚ã£ã¨è©³ç´°ãŒçŸ¥ã‚ŠãŸã‘ã‚Œã°ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ğŸ”¥

MySQL [robotamadb]> show tables;

3-2. ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ


create table `users` (
    `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
    `user_name` VARCHAR(100) NOT NULL COMMENT "ãƒ¦ãƒ¼ã‚¶ãƒ¼å",
    `mail_address` VARCHAR(200) NOT NULL COMMENT "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    `password` VARCHAR(100) NOT NULL COMMENT "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
    `created` datetime DEFAULT NULL COMMENT "ç™»éŒ²æ—¥",
    `modified` datetime DEFAULT NULL COMMENT "æ›´æ–°æ—¥"
) ENGINE=InnoDB DEFAULT CHARSET=utf8;



MySQL [robotamadb]> create table `users` (
    ->     `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
    ->     `user_name` VARCHAR(100) NOT NULL COMMENT "ãƒ¦ãƒ¼ã‚¶ãƒ¼å",
    ->     `mail_address` VARCHAR(200) NOT NULL COMMENT "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    ->     `password` VARCHAR(100) NOT NULL COMMENT "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
    ->     `created` datetime DEFAULT NULL COMMENT "ç™»éŒ²æ—¥",
    ->     `modified` datetime DEFAULT NULL COMMENT "æ›´æ–°æ—¥"
    -> ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
Query OK, 0 rows affected (0.582 sec)


MySQL [robotamadb]> show tables;
+----------------------+
| Tables_in_robotamadb |
+----------------------+
| users                |
+----------------------+
1 row in set (0.000 sec)



MySQL [robotamadb]> show table status;
+-------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-----------------+----------+----------------+---------+
| Name  | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time | Check_time | Collation       | Checksum | Create_options | Comment |
+-------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-----------------+----------+----------------+---------+
| users | InnoDB |      10 | Dynamic    |    0 |              0 |       16384 |               0 |            0 |         0 |              1 | 2022-11-14 10:24:11 | NULL        | NULL       | utf8_general_ci |     NULL |                |         |
+-------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-----------------+----------+----------------+---------+
1 row in set (0.060 sec)




3-2. ãƒ†ãƒ¼ãƒ–ãƒ«ã®å‰Šé™¤


    mysql > DROP TABLE [ãƒ†ãƒ¼ãƒ–ãƒ«å]

        TABLEãŒå­˜åœ¨ã—ãªã„æ™‚ã«ã‚¨ãƒ©ãƒ¼ã§æ­¢ã‚ãŸããªã‘ã‚Œã°ã€

        æ¬¡ã®ã‚ˆã†ã« IF EXISTS ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§TABLEãŒå­˜åœ¨ã™ã‚‹æ™‚ã®ã¿ DROP TABLE æ–‡ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã§ãã¾ã™ã€‚

    mysql > DROP TABLE IF EXISTS [ãƒ†ãƒ¼ãƒ–ãƒ«å]



    create table `robotama` (
    `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
    `robotama_name` VARCHAR(100) NOT NULL COMMENT "ãƒ­ãƒœç‰ã®åå‰",
    `from` VARCHAR(200) NOT NULL COMMENT "å‡ºèº«åœ°");

    Query OK, 0 rows affected (0.239 sec)

    MySQL [RobotamaDB]> show tables;
    +----------------------+
    | Tables_in_robotamadb |
    +----------------------+
    | robotama             |
    | users                |
    +----------------------+
    2 rows in set (0.001 sec)


    MySQL [RobotamaDB]> drop table robotama;
    Query OK, 0 rows affected (0.211 sec)

    MySQL [RobotamaDB]> show tables;
    +----------------------+
    | Tables_in_robotamadb |
    +----------------------+
    | users                |
    +----------------------+
    1 row in set (0.001 sec)




3-3. ãƒ†ãƒ¼ãƒ–ãƒ«åã®å¤‰æ›´

    ALTER => ã€Œå¤‰æ›´ã™ã‚‹ã€ã¨è¨€ã†æ„å‘³ã®è‹±å˜èª

    mysql > ALTER TABLE [æ—§ãƒ†ãƒ¼ãƒ–ãƒ«å] RENAME [æ–°ãƒ†ãƒ¼ãƒ–ãƒ«å]


    MySQL [RobotamaDB]> create table `robotama` (
    ->     `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
    ->     `robotama_name` VARCHAR(100) NOT NULL COMMENT "ãƒ­ãƒœç‰ã®åå‰",
    ->     `from` VARCHAR(200) NOT NULL COMMENT "å‡ºèº«åœ°");
    Query OK, 0 rows affected (0.176 sec)

    MySQL [RobotamaDB]> alter table robotama rename rename_robotama;
    Query OK, 0 rows affected (0.115 sec)

    MySQL [RobotamaDB]> show tables;
    +----------------------+
    | Tables_in_robotamadb |
    +----------------------+
    | rename_robotama      |
    | users                |
    +----------------------+
    2 rows in set (0.000 sec)



3-4. ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚«ãƒ©ãƒ ã®è¿½åŠ 


mysql > ALTER TABLE [ãƒ†ãƒ¼ãƒ–ãƒ«å] ADD [è¿½åŠ ã‚«ãƒ©ãƒ å] [å‹] [å¿…è¦ã§ã‚ã‚Œã°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç­‰];

    # ä¾‹(å‹•ä½œç¢ºèªã—ã¦ãªã„ã®ã§ã‚ã‚„ãµã‚„ã§ã™ãŒã“ã‚“ãªæ„Ÿã˜)
    #  users ã« tel ã¨ã„ã† int å‹ã®ã‚«ãƒ©ãƒ  ã‚’ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆNULL ã§å®šç¾©ã—ã€ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ é›»è©±ç•ªå· ã¨ã„ã‚Œã¦ãŠãã€ mail_addressã‚«ãƒ©ãƒ ã®å¾Œã‚ ã«è¿½åŠ ã™ã‚‹

    mysql > ALTER TABLE users ADD tel int DEFAULT NULL COMMENT "é›»è©±ç•ªå·" AFTER mail_address;


MySQL [RobotamaDB]> ALTER TABLE users ADD tel int DEFAULT NULL COMMENT "é›»è©±ç•ªå·" AFTER mail_address;
Query OK, 0 rows affected (0.588 sec)
Records: 0  Duplicates: 0  Warnings: 0

MySQL [RobotamaDB]> desc users;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_name    | varchar(100) | NO   |     | NULL    |                |
| mail_address | varchar(200) | NO   |     | NULL    |                |
| tel          | int(11)      | YES  |     | NULL    |                |
| password     | varchar(100) | NO   |     | NULL    |                |
| created      | datetime     | YES  |     | NULL    |                |
| modified     | datetime     | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
7 rows in set (0.023 sec)

MySQL [RobotamaDB]> show full columns from users;
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
| Field        | Type         | Collation       | Null | Key | Default | Extra          | Privileges                      | Comment        |
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
| id           | int(11)      | NULL            | NO   | PRI | NULL    | auto_increment | select,insert,update,references | ID             |
| user_name    | varchar(100) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ¦ãƒ¼ã‚¶ãƒ¼å     |
| mail_address | varchar(200) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| tel          | int(11)      | NULL            | YES  |     | NULL    |                | select,insert,update,references | é›»è©±ç•ªå·       |
| password     | varchar(100) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰     |
| created      | datetime     | NULL            | YES  |     | NULL    |                | select,insert,update,references | ç™»éŒ²æ—¥         |
| modified     | datetime     | NULL            | YES  |     | NULL    |                | select,insert,update,references | æ›´æ–°æ—¥         |
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
7 rows in set (0.045 sec)



3-5. ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã®ç¢ºèª

mysql > desc [ãƒ†ãƒ¼ãƒ–ãƒ«å]



MySQL [RobotamaDB]> desc users;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_name    | varchar(100) | NO   |     | NULL    |                |
| mail_address | varchar(200) | NO   |     | NULL    |                |
| tel          | int(11)      | YES  |     | NULL    |                |
| password     | varchar(100) | NO   |     | NULL    |                |
| created      | datetime     | YES  |     | NULL    |                |
| modified     | datetime     | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
7 rows in set (0.023 sec)



ã‚‚ã£ã¨è©³ç´°ãŒçŸ¥ã‚ŠãŸã‘ã‚Œã°


mysql > SHOW FULL COLUMNS FROM [ãƒ†ãƒ¼ãƒ–ãƒ«å];


MySQL [RobotamaDB]> show full columns from users;
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
| Field        | Type         | Collation       | Null | Key | Default | Extra          | Privileges                      | Comment        |
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
| id           | int(11)      | NULL            | NO   | PRI | NULL    | auto_increment | select,insert,update,references | ID             |
| user_name    | varchar(100) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ¦ãƒ¼ã‚¶ãƒ¼å     |
| mail_address | varchar(200) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| tel          | int(11)      | NULL            | YES  |     | NULL    |                | select,insert,update,references | é›»è©±ç•ªå·       |
| password     | varchar(100) | utf8_general_ci | NO   |     | NULL    |                | select,insert,update,references | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰     |
| created      | datetime     | NULL            | YES  |     | NULL    |                | select,insert,update,references | ç™»éŒ²æ—¥         |
| modified     | datetime     | NULL            | YES  |     | NULL    |                | select,insert,update,references | æ›´æ–°æ—¥         |
+--------------+--------------+-----------------+------+-----+---------+----------------+---------------------------------+----------------+
7 rows in set (0.045 sec)







[ 4. ãƒ¬ã‚³ãƒ¼ãƒ‰æ“ä½œé–¢é€£ ]


4-0. æŒ‡å®šãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹ğŸ”¥

MySQL [RobotamaDB]> select * from users;
+----+-----------------+-----------------------+------+----------+---------------------+---------------------+
| id | user_name       | mail_address          | tel  | password | created             | modified            |
+----+-----------------+-----------------------+------+----------+---------------------+---------------------+
|  1 | ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰  | robtoama@gmai.com     | NULL | 12345    | 2022-11-14 10:41:02 | 2022-11-14 10:41:02 |
|  2 | ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ | prototype1@gmai.com   | NULL | 12       | 2022-11-14 10:44:29 | 2022-11-14 10:44:29 |
|  3 | Neo-Robotama    | neo_robotama@gmai.com | NULL | 123      | 2022-11-14 10:44:39 | 2022-11-14 10:44:39 |
+----+-----------------+-----------------------+------+----------+---------------------+---------------------+
3 rows in set (0.017 sec)


4-1. ãƒ¬ã‚³ãƒ¼ãƒ‰(å®Ÿãƒ‡ãƒ¼ã‚¿)ã®è¿½åŠ 

mysql > INSERT INTO [ãƒ†ãƒ¼ãƒ–ãƒ«å] [ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å] VALUES [å€¤]


MySQL [RobotamaDB]> INSERT INTO users (user_name, mail_address, password, created, modified) VALUES ("ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰", "robtoama@gmai.com", "12345", now(), now());
Query OK, 1 row affected (0.091 sec)


INSERT INTO users (user_name, mail_address, password, created, modified) VALUES ("ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ", "prototype1@gmai.com", "12", now(), now());

INSERT INTO users (user_name, mail_address, password, created, modified) VALUES ("Neo-Robotama", "neo_robotama@gmai.com", "123", now(), now());


    now() ãƒ»ãƒ»ãƒ» ç¾åœ¨ã®æ—¥æ™‚ãŒå…¥åŠ›ã•ã‚Œã‚‹é–¢æ•°


4-2. ãƒ¬ã‚³ãƒ¼ãƒ‰(å®Ÿãƒ‡ãƒ¼ã‚¿)ã®æ›´æ–°

mysql > UPDATE [ãƒ†ãƒ¼ãƒ–ãƒ«å] SET [ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å]=[å€¤] WHERE [æ¡ä»¶å¼]


    ã€WHERE [æ¡ä»¶å¼]ã€ãŒç„¡ã—ã ã¨ã€å¯¾è±¡ãŒå…¨ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚

    ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°ã§ãã¾ã™ã€‚


update users set user_name = "Robotama-Prototype-2", mail_address = "robotama_2@gmai.com" where id = 3;


[ å®Ÿè¡Œ & ç¢ºèª ]

    MySQL [RobotamaDB]> select * from users;
    +----+-----------------+-----------------------+------+----------+---------------------+---------------------+
    | id | user_name       | mail_address          | tel  | password | created             | modified            |
    +----+-----------------+-----------------------+------+----------+---------------------+---------------------+
    |  1 | ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰  | robtoama@gmai.com     | NULL | 12345    | 2022-11-14 10:41:02 | 2022-11-14 10:41:02 |
    |  2 | ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ | prototype1@gmai.com   | NULL | 12       | 2022-11-14 10:44:29 | 2022-11-14 10:44:29 |
    |  3 | Neo-Robotama    | neo_robotama@gmai.com | NULL | 123      | 2022-11-14 10:44:39 | 2022-11-14 10:44:39 |
    +----+-----------------+-----------------------+------+----------+---------------------+---------------------+
    3 rows in set (0.017 sec)

    MySQL [RobotamaDB]> update users set user_name = "Robotama-Prototype-2", mail_address = "robotama_2@gmai.com" where id = 3;
    Query OK, 1 row affected (0.102 sec)
    Rows matched: 1  Changed: 1  Warnings: 0

    MySQL [RobotamaDB]> select * from users;
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    | id | user_name            | mail_address        | tel  | password | created             | modified            |
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    |  1 | ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰       | robtoama@gmai.com   | NULL | 12345    | 2022-11-14 10:41:02 | 2022-11-14 10:41:02 |
    |  2 | ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ      | prototype1@gmai.com | NULL | 12       | 2022-11-14 10:44:29 | 2022-11-14 10:44:29 |
    |  3 | Robotama-Prototype-2 | robotama_2@gmai.com | NULL | 123      | 2022-11-14 10:44:39 | 2022-11-14 10:44:39 |
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    3 rows in set (0.000 sec)



4-3. ãƒ¬ã‚³ãƒ¼ãƒ‰(å®Ÿãƒ‡ãƒ¼ã‚¿)ã®å‰Šé™¤

4-3-1. å…¨ãƒ¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤

mysql > DELETE FROM [ãƒ†ãƒ¼ãƒ–ãƒ«å]



4-3-2. ä¸€éƒ¨ãƒ¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤

mysql > DELETE FROM [ãƒ†ãƒ¼ãƒ–ãƒ«å] WHERE [æ¡ä»¶å¼]


delete from users where id = 3;


    MySQL [RobotamaDB]> select * from users;
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    | id | user_name            | mail_address        | tel  | password | created             | modified            |
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    |  1 | ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰       | robtoama@gmai.com   | NULL | 12345    | 2022-11-14 10:41:02 | 2022-11-14 10:41:02 |
    |  2 | ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ      | prototype1@gmai.com | NULL | 12       | 2022-11-14 10:44:29 | 2022-11-14 10:44:29 |
    |  3 | Robotama-Prototype-2 | robotama_2@gmai.com | NULL | 123      | 2022-11-14 10:44:39 | 2022-11-14 10:44:39 |
    +----+----------------------+---------------------+------+----------+---------------------+---------------------+
    3 rows in set (0.000 sec)

    MySQL [RobotamaDB]> delete from users where id = 3;
    Query OK, 1 row affected (0.059 sec)

    MySQL [RobotamaDB]> select * from users;
    +----+-----------------+---------------------+------+----------+---------------------+---------------------+
    | id | user_name       | mail_address        | tel  | password | created             | modified            |
    +----+-----------------+---------------------+------+----------+---------------------+---------------------+
    |  1 | ã·ã‚‹ã·ã‚‹ãƒ­ãƒœç‰  | robtoama@gmai.com   | NULL | 12345    | 2022-11-14 10:41:02 | 2022-11-14 10:41:02 |
    |  2 | ãƒ­ãƒœç‰è©¦ä½œ1å·æ©Ÿ | prototype1@gmai.com | NULL | 12       | 2022-11-14 10:44:29 | 2022-11-14 10:44:29 |
    +----+-----------------+---------------------+------+----------+---------------------+---------------------+
    2 rows in set (0.000 sec)





< Useræƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥ >

1. Useræƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥

MariaDB [(none)]> select user from mysql.user;
+-------------+
| User        |
+-------------+
| root        |
| root        |
| root        |
| mariadb.sys |
| root        |
+-------------+
5 rows in set (0.001 sec)


MySQL [RobotamaDB]> select user from mysql.user;
+---------------+
| user          |
+---------------+
| mysql.session |
| mysql.sys     |
| root          |
+---------------+
3 rows in set (0.135 sec)




# Useræƒ…å ±ã¨Hostæƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥

MariaDB [(none)]> select user, host from mysql.user;
+-------------+-----------+
| User        | Host      |
+-------------+-----------+
| root        | 127.0.0.1 |
| root        | ::1       |
| root        | robotama  |
| mariadb.sys | localhost |
| root        | localhost |
+-------------+-----------+
5 rows in set (0.001 sec)


MySQL [RobotamaDB]> select user, host from mysql.user;
+---------------+-----------+
| user          | host      |
+---------------+-----------+
| mysql.session | localhost |
| mysql.sys     | localhost |
| root          | localhost |
+---------------+-----------+
3 rows in set (0.000 sec)



# userName, Host, Password ã®ç¢ºèªã™ã‚‹ğŸ”¥

MariaDB [(none)]> select user, host, password from mysql.user;
+-------------+-----------+-------------------------------------------+
| User        | Host      | Password                                  |
+-------------+-----------+-------------------------------------------+
| mariadb.sys | localhost |                                           |
| root        | localhost | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | robotama  | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | 127.0.0.1 | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | ::1       | *9E1AA81F840662856BA1AFA79A5DB9B99140499C |
+-------------+-----------+-------------------------------------------+
5 rows in set (0.001 sec)




2. æ–°ã—ã„Userã‚’ä½œæˆã™ã‚‹ğŸ”¥

    æ–°ã—ããƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã¯ã€CREATE USERæ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

        CREATE USER 'ãƒ¦ãƒ¼ã‚¶å'@'ãƒ›ã‚¹ãƒˆå' IDENTIFIED BY 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰';

    ãƒ¦ãƒ¼ã‚¶åã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã¯ã€ä»»æ„ã®æ–‡å­—åˆ—ã‚’è¨­å®šã—ã¦ä¸‹ã•ã„ã€‚
    
    ãƒ›ã‚¹ãƒˆåã«ã¯ã€MySQLã¸æ¥ç¶šã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
    
    ãƒ›ã‚¹ãƒˆåã®ä»£ã‚ã‚Šã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„localhostã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚


    ã²ã¨ã¾ãšã€Userå&Passwordã ã‘è¨­å®šã™ã‚‹

    CREATE USER Robotama IDENTIFIED BY 'FwXjueuzNSqc3hoensC2';

    create user 'Robotama'@'localhost' IDENTIFIED BY 'FwXjueuzNSqc3hoensC2';


    create user Robotama identified by 'robotama-purupuru';


    MySQL [RobotamaDB]> create user Robotama identified by 'robotama-purupuru';
    Query OK, 0 rows affected (0.106 sec)

    MySQL [RobotamaDB]> select user, host from mysql.user;
    +---------------+-----------+
    | user          | host      |
    +---------------+-----------+
    | Robotama      | %         |
    | mysql.session | localhost |
    | mysql.sys     | localhost |
    | root          | localhost |
    +---------------+-----------+
    4 rows in set (0.000 sec)


    create user Robotama@localhost identified by 'robotama-nanoda';

    MySQL [RobotamaDB]> create user Robotama@localhost identified by 'robotama-nanoda';
    Query OK, 0 rows affected (0.000 sec)

    MySQL [RobotamaDB]> select user, host from mysql.user;
    +---------------+-----------+
    | user          | host      |
    +---------------+-----------+
    | Robotama      | %         |
    | Robotama      | localhost |
    | mysql.session | localhost |
    | mysql.sys     | localhost |
    | root          | localhost |
    +---------------+-----------+
    5 rows in set (0.000 sec)



3. Userã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ğŸ”¥


    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ–¹æ³•-1
    SET PASSWORD FOR ãƒ¦ãƒ¼ã‚¶å@ãƒ›ã‚¹ãƒˆå=password('æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰');

        => æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã™


    # ç¾åœ¨æ¥ç¶šã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹å ´åˆ
    set password = password('QTvJtwoaqbAUPx663d3u');


    set password = password('robotama-pass');

    MySQL [RobotamaDB]> set password = password('robotama-pass');
    Query OK, 0 rows affected, 1 warning (0.001 sec)

    MySQL [RobotamaDB]>



    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ–¹æ³•-2
    mysqladmin password æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -u ãƒ¦ãƒ¼ã‚¶ãƒ¼å -p

        => ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ã‚ªãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§å›²ã‚€å¿…è¦ã¯ãªã„ï¼


    mysqladmin password GunmarBanzai -u Robotama@localhost -p





4. User ã‚’å‰Šé™¤ã™ã‚‹ğŸ”¥
    
    DROP USER Robotama;

    drop user 'Robotama'@'localhost';


    MySQL [(none)]> select user, host from mysql.user;
    +---------------+-----------+
    | user          | host      |
    +---------------+-----------+
    | Robotama      | %         |
    | Robotama      | localhost |
    | mysql.session | localhost |
    | mysql.sys     | localhost |
    | root          | localhost |
    +---------------+-----------+
    5 rows in set (0.000 sec)

    MySQL [(none)]> drop user Robotama@localhost;
    Query OK, 0 rows affected (0.002 sec)

    MySQL [(none)]> select user, host from mysql.user;
    +---------------+-----------+
    | user          | host      |
    +---------------+-----------+
    | Robotama      | %         |
    | mysql.session | localhost |
    | mysql.sys     | localhost |
    | root          | localhost |
    +---------------+-----------+
    4 rows in set (0.000 sec)



    
# HostæŒ‡å®šã§ã€æ¥ç¶šå…ˆã‚’æŒ‡å®šã™ã‚‹ğŸ”¥
mysql -u Robotama -p -h 127.0.0.1

mysql -u Robotama -p -h localhost




5.  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ¨©é™ä»˜ä¸ğŸ”¥

    5-1. æ¨©é™ã®ç¢ºèª
        
        show grants for Robotama;

        show grants for 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å'@'ãƒ›ã‚¹ãƒˆå';

        show grants for 'Robotama'@'localhost';


        MySQL [(none)]> show grants for Robotama;
        +--------------------------------------+
        | Grants for Robotama@%                |
        +--------------------------------------+
        | GRANT USAGE ON *.* TO 'Robotama'@'%' |
        +--------------------------------------+
        1 row in set (0.025 sec)



        # root User ã®æ¨©é™ç¢ºèªã‚’ã™ã‚‹ğŸ”¥

        MySQL [(none)]> show grants for root@localhost;
        +---------------------------------------------------------------------+
        | Grants for root@localhost                                           |
        +---------------------------------------------------------------------+
        | GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
        | GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION        |
        +---------------------------------------------------------------------+
        2 rows in set (0.016 sec)



    5-2. æ¨©é™ã®ä»˜ä¸
    
        GRANT æ¨©é™ ON ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å.ãƒ†ãƒ¼ãƒ–ãƒ«å TO 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å';

        grant all on RobotamaDB.* to Robotama;

        grant all on RobotamaDB.* to Robotama@localhost;

        GRANT ALL PRIVILEGES ON * . * TO Robotama@localhost;


        # æ¨©é™ã‚’ä»˜ä¸ã—ãŸå¾Œã®Reload => ä»˜ä¸ã—ãŸæ¨©é™è¨­å®šã®åæ˜ 

        FLUSH PRIVILEGES;

            
        MySQL [(none)]> grant all on RobotamaDB.* to Robotama;
        Query OK, 0 rows affected (0.040 sec)

        MySQL [(none)]> flush privileges;
        Query OK, 0 rows affected (0.021 sec)



        MySQL [(none)]> grant all on RobotamaDB.* to Robotama;
        Query OK, 0 rows affected (0.040 sec)

        MySQL [(none)]> flush privileges;
        Query OK, 0 rows affected (0.021 sec)

        MySQL [(none)]> show grants for Robotama;
        +----------------------------------------------------------+
        | Grants for Robotama@%                                    |
        +----------------------------------------------------------+
        | GRANT USAGE ON *.* TO 'Robotama'@'%'                     |
        | GRANT ALL PRIVILEGES ON `robotamadb`.* TO 'Robotama'@'%' |
        +----------------------------------------------------------+
        2 rows in set (0.000 sec)




< ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ€ãƒ³ãƒ—ã‚’å–ã‚‹ğŸ”¥ >


Database ã® Dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚‹ => Dumpã¯ã€å¤–éƒ¨ã‹ã‚‰å–ã‚Œã‚‹ğŸ”¥


    mysqldump -u [ãƒ¦ãƒ¼ã‚¶ãƒ¼å] -p -x test_db > [å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«å]


    # MariaDBã‹ã‚‰dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ï¼

    mysqldump -u root -p RobotamaDB >RobotamaDB.dump

    ã¾ãŸã¯ã€ã€ã€

    mysqldump -u root -p RobotamaDB >RobotamaDB.sql


    User\Robotama\Desktop> mysqldump -u root -p RobotamaDB >RobotamaDB.dump
    Enter password: *************
    PS C:\Users\suda\Desktop>



    # Dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚‹ğŸ”¥
    mysqldump -u root -p RobotamaCMS > robotama.dump

    # Restoreã™ã‚‹ğŸ”¥
    mysql -u root -p RobotamaCMS < C:\robotama.dump



< SQLå®Ÿè¡Œçµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã™ã‚‹ğŸ”¥ >

mysql -u root -p -e "select * from users" test_db > /tmp/mysql.txt

mysql -u ãƒ¦ãƒ¼ã‚¶ãƒ¼å -p -e "SQLã®å®Ÿè¡Œæ–‡" SQLã®å¯¾è±¡DB > å‡ºåŠ›å…ˆã®Path

mysql -u root -p -e "select * from users" RobotamaDB > C:\Users\Robotama\Desktop\robotama.txt






< MariaDBã®ãƒãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹ >

MariaDBãŒæ¥ç¶šã™ã‚‹ã¨ãã«ä½¿ã†ãƒãƒ¼ãƒˆç•ªå·ã‚’ç¢ºèªã—ã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§ã‚ã‚Œã°ã€3306ã§ã™ã€‚

mysql > show variables like 'port';

+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| port          | 3306  |
+---------------+-------+


MySQL [RobotamaDB]> show variables like 'port';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| port          | 3306  |
+---------------+-------+
1 row in set, 1 warning (0.025 sec)






< å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥ >


1. ã‚ˆãä½¿ã†MySQLã‚³ãƒãƒ³ãƒ‰&æ§‹æ–‡é›†
https://qiita.com/CyberMergina/items/f889519e6be19c46f5f4



2. ã€MariaDB/MySQLã€‘å¤–éƒ¨æ¥ç¶šã®è¨­å®šæ–¹æ³•
https://blog.websandbag.com/entry/2018/06/03/223431




3. MySQLã§æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¦æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹æ–¹æ³•
https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql-ja



4. ã€MySQLå…¥é–€ã€‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã®æ–¹æ³•ã‚’è§£èª¬ï¼8.0ã‹ã‚‰ã®å¤‰æ›´ç‚¹ã‚‚ç´¹ä»‹
https://www.sejuku.net/blog/82303



5. MySQLã§ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã—ã€æ¨©é™ã‚’è¨­å®šã™ã‚‹æ–¹æ³•
https://proengineer.internous.co.jp/content/columnfeature/6638


6. MySQLã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã€ŒSET PASSWORDã€
https://uxmilk.jp/12396








