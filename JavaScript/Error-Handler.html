<div>
<script>

// JavaScriptの例外処理 try-catch-finally文とthrow new Error の使い方


const SaitamaNoSpy = {
    id: 1,
    robotama: 'ロボ玉',
    like: 'ひまたね',
    yama: '富士山',
    from: 'さいたまー共和国',
    purupuru: false,
}

const Gunmar = {
    id: 2,
    robotama: 'ジョニー・ジョコビッチ (JoJo)',
    like: '焼きまんじゅう',
    yama: '赤城山',
    from: '神聖グンマー帝国',
    purupuru: true,
}

const GunmarCheck = (key, val) => {

    // 1. try-ブロック => 通常の処理を記述する
    try {


        // 1-1. グンマーの民かどうかを試すブロック
        if (key == 'from' && val !== '神聖グンマー帝国') throw new Error('お前、グンマーじゃないな・・・');

        if (key == 'yama' && val !== '赤城山') throw new Error('グンマー帝国の山は、赤城山だ！');

        if (key == 'like' && val !== '焼きまんじゅう') throw new Error('故郷の味は、焼きまんじゅう！');


        // 1-2. 無事に、グンマーの民、Checkをクリアしたらここまで来れる！
        
        // throw new Error で、catch-ブロックに飛ばなければ、ここの console.logが出力される。
        console.log(key, val);


    // 2. catch-ブロック => 異常系の処理インターファイスを記述する
    } catch (error) {

        console.error(error);

    // 3. finally-ブロック => Success か Error かに関わらず、実行する処理を記述する！
    // finally-ブロックの中に書いたコードは、 try および catch ブロックの後で常に実行されます。
    } finally {
        console.log('神聖グンマー帝国、万歳！');
    }
}


for (const key in  SaitamaNoSpy) {
    const val = SaitamaNoSpy[key];
    GunmarCheck(key, val);
}


for (const key in  Gunmar) {
    const val = Gunmar[key];
    GunmarCheck(key, val);
}


</script>
</div>
