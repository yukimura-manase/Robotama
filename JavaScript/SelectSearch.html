
<style>

input[type='text'] {
    width: 80%;
    height: 30px;
    margin-top: 10px;
}


</style>

<h1>æ—¥æœ¬ 47éƒ½é“åºœçœŒ</h1>
<div style="text-align: center;">
    <div style="margin-top: 12px;">
        <span>æ¤œç´¢</span>
        <input type="text" id="searchbox">
        
        <!-- <input type="button" id="clear" value="ãƒªã‚»ãƒƒãƒˆ"> -->
        <!-- <input type="button" id="delete" value="å‰Šé™¤"> -->
        <!-- <input type="button" id="add" value="è¿½åŠ "> -->
        <!-- <input type="button" id="add" value="æ¤œç´¢"> -->
        <!-- <input type="button" id="clear" value="ãƒªã‚»ãƒƒãƒˆ"> -->
    </div>
    <select name="pref" id="select-pref" multiple>
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <optgroup label="åŒ—æµ·é“">
            <option value="1">åŒ—æµ·é“</option>
        </optgroup>
        <optgroup label="æ±åŒ—">
            <option value="2">é’æ£®çœŒ</option>
            <option value="3">å²©æ‰‹çœŒ</option>
            <option value="4">å®®åŸçœŒ</option>
            <option value="5">ç§‹ç”°çœŒ</option>
            <option value="6">å±±å½¢çœŒ</option>
            <option value="7">ç¦å³¶çœŒ</option>
        </optgroup>
        <optgroup label="é–¢æ±">
            <option value="8">èŒ¨åŸçœŒ</option>
            <option value="9">æ ƒæœ¨çœŒ</option>
            <option value="10">ç¾¤é¦¬çœŒ</option>
            <option value="11">åŸ¼ç‰çœŒ</option>
            <option value="12">åƒè‘‰çœŒ</option>
            <option value="13">æ±äº¬éƒ½</option>
            <option value="14">ç¥å¥ˆå·çœŒ</option>
        </optgroup>
    </select>
    <div>
        <input type="text" id="select-info" value="" placeholder="é¸æŠã•ã‚ŒãŸã‚‚ã®ãŒè¡¨ç¤ºã•ã‚Œã¾ã™" disabled>
    </div>
</div>


<script>

    // [ å®Ÿè¡Œã™ã¹ãå‡¦ç†å†…å®¹: Tasks ]

    // 1. æ¤œç´¢çª“ã®å…¥åŠ›ã‚’å—ã‘å–ã£ã¦ã€OptionListã«è©²å½“ã™ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã‚‹

    // 2. è©²å½“ã®ã‚‚ã®ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ãã®OptionListã ã‘ã‚’è¡¨ç¤ºã™ã‚‹

    // 3. ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã§ã€æ¤œç´¢çŠ¶æ…‹ã‚„è¿½åŠ çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹

    // 

    // 4. ã‚»ãƒ¬ã‚¯ãƒˆã—ãŸã‚‚ã®ã‚’è¡¨ç¤ºã™ã‚‹

    // const clickBtn = () => {

    //     const select = document.getElementById('robotama');

    //     console.log({select});

    //     // å€¤(æ•°å€¤)ã‚’å–å¾—
    //     const num = select.selectedIndex;

    //     console.log({num});

    //     // å€¤(æ•°å€¤)ã‹ã‚‰å€¤(valueå€¤)ã‚’å–å¾—
    //     const value = select.options[num].value;
    //     console.log({value});

    //     document.getElementById("output").textContent = value; 
    // }


    function AddChildren (select, list) {

        // Optionãƒªã‚¹ãƒˆã®è¦ç´ æ•°ã¾ã§ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ (0ãŒè¦ç´ æ•°ã¨åŒã˜é•·ã•ä»¥ä¸Šã«ãªã‚‹ã¾ã§ã¯ true)
        for (let i = 0; i <= list.length; i++) {

            console.log(typeof list[i]);
            select.appendChild(list[i]);
        }
    }


    // å­è¦ç´ ã‚’ã™ã¹ã¦å‰Šé™¤ã™ã‚‹é–¢æ•°
    function RemoveChildren (x) {
        if (x.hasChildNodes()) {
            while (x.childNodes.length > 0) {
                x.removeChild(x.firstChild);
            }
            // let option = document.createElement('option');
            // option.setAttribute('value', 'robtoama');
            // option.textContent = 'ãƒ­ãƒœç‰';
            // x.appendChild(option);
        }
    }

    // æŒ‡å®šã—ãŸè¦ç´ ã ã‘ã‚’Optionã¨ã—ã¦Setã™ã‚‹é–¢æ•°

    // ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã§ã€ã™ã¹ã¦Setã™ã‚‹é–¢æ•°



    // 1. SelectBox => HTMLSelectElement
    const selectPref = document.getElementById('select-pref');

    // selectPref.addEventListener('change', (e) => {
    //     console.log(e);
    // });

    // console.log(selectPref);
    // console.dir(selectPref);

    // 2. åˆæœŸè¨­å®šã®é¸æŠè‚¢ => HTMLOptionsCollection
    const options = selectPref.options;

    const optionInit = document.querySelectorAll('#select-pref option');
    // console.dir(optionInit);

    const optionList = [...selectPref.options];

    // console.log(options);
    // console.dir(options);

    // console.log(options.length);

    const prefList = [];

    // HTMLCollectionã‚’forEachã™ã‚‹ãªã‚‰ã€ä¸€åº¦ã€é…åˆ—ã«å¤‰æ›ã™ã‚‹
    [...options].forEach((option) => {
        // console.log(option.value);
        // console.log(option.label);
        // console.log(option.innerText);

        prefList.push(option.innerText);
    });


    // 3. æ¤œç´¢Box
    const searchbox = document.getElementById('searchbox');

    // æ¤œç´¢çµæœã®Option-List
    let searchResult = [];

    // å…¥åŠ›æ–‡å­—åˆ—ã‚’å—ã‘å–ã‚‹å‡¦ç†
    searchbox.addEventListener('input', (e) => {
        // console.log(e.target.value);

        let val = e.target.value;

        // æ¤œç´¢æ–‡å­—åˆ—ã‹ã‚‰çµã‚Šè¾¼ã‚€
        searchResult = prefList.filter((pref) => {

            // æ­£è¦è¡¨ç¾ã§å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€RegExp-Classã‚’ä½¿ç”¨ã™ã‚‹
            let reg = new RegExp(`^${val}`);
            // console.log({reg});

            // æ¡ä»¶ã¨ä¸€è‡´ã—ãŸã‚‚ã®ã‚’è¿”ã™
            return reg.test(pref);
        });

        console.log({searchResult});

        // æ—¢å­˜ã®ã‚‚ã®ã‚’å‰Šé™¤ã—ã¦ã€æ–°ã—ã„Option-Listã‚’Setã™ã‚‹

        // RemoveChildren(selectPref);

        // AddChildren(selectPref, searchResult);

        
        // console.log(options);

        // for (const key in options) {
        //     console.log({key});

        //     const val = options[key];

        //     console.log({val});

        // }


    });



    // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
    // const clearBtn = document.getElementById('clear');

    // clearBtn.addEventListener('click', () => {
    //     // console.log('ã‚¯ãƒªã‚¢å‡¦ç†');
    //     // console.dir(options);
    //     // console.dir(optionList);
    //     // console.log(options.length);

    //     AddChildren(selectPref, optionInit);
    // });

    // // å‰Šé™¤ãƒœã‚¿ãƒ³
    // const deleteBtn = document.getElementById('delete');
    // deleteBtn.addEventListener('click', () => {
    //     // console.log('å‰Šé™¤å‡¦ç†');
    //     RemoveChildren(selectPref);
    // });


</script>

<script>
    // å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥

    // 1. æ—¥æœ¬ã®åœ°æ–¹åŒºåˆ†
    // https://makitani.net/shimauma/knowledge/regional-classification-of-japan

</script>
