< Apache Timeout 設定🔥 >


1. httpd.conf に以下を追加してみてください。(要Apache再起動)

  
### TimeOut-Config ###
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 15


1. Timeout: データ送受信時の待ち時間を秒単位で設定する。

    次のような処理のタイムアウト値です。デフォルト値は60秒です。

    1. クライアントからのHTTPリクエスト受信時のTCPパケット受信待機時間
    2. クライアントへのHTTPレスポンス送信時のTCPパケット送信(相手からACKを受信するまでの)待機時間
    3. モジュール(mod_xxx)の処理待機時間



2. KeepAlive: HTTP セッションの持続的な接続を、有効または無効に設定する。

    KeepAliveを使用することで、1つのTCPコネクションを使用して複数のHTTPリクエストを処理することができます。
    
    複数の画像ファイルやCSSファイルを同時に読み込むWebページを配信するWebサーバでは、KeepAliveを使用することでApacheの性能が向上します。

    KeepAliveはデフォルトでOnになっていますが、ファイル内には明示的な記載がありません。ファイルの末尾に、KeepAliveに関する設定を追加します。



3. MaxKeepAliveRequests: KeepAlive ディレクティブが On の時、1 回の接続 (TCP) で受付を許容するリクエストの最大数を指定する。


    TCPコネクション維持中に一度に処理できる最大リクエスト数を示すMaxKeepAliveRequestsは、一般的に100程度を指定しておけば不足することはありません。



4. KeepAliveTimeout: 　KeepAlive ディレクティブが On の時、次のリクエストまでの待ち時間を秒単位で指定する。

    TCPコネクションを維持する最長時間(秒)を示すKeepAliveTimeoutは、TCPコネクションを維持し続ける時間を指定します。
    
    この期間は、1つのTCPコネクションで複数のHTTP通信が行えます。
    
    一般的には数秒程度を指定します。

    サーバがHTTPリクエスト受け付けると、KeepAliveTimeoutの期間TCPコネクションが保持され続けます。
    
    大きな値を指定すると、大量のクライアントから同時接続があった際にTCPコネクションが不足する恐れがあるので注意が必要です。



性能対策設定 (TimeOut / KeepAlive)
https://densan-hoshigumi.com/server/apache/performance-tuning-timeout-keepalive


web サーバ (Apache/2.0) の設定
http://park12.wakwak.com/~eslab/pcmemo/linux/apache/apache3.html


Centos7、Apache 2.4.6 でタイムアウトの秒数設定を変更
https://teratail.com/questions/321787

