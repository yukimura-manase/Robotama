
< MySQL ã‚³ãƒãƒ³ãƒ‰é›†ğŸ”¥ >


< 2022/09/05 Today's TaskğŸ”¥ >

æœ¬ç•ªç’°å¢ƒã¯ã€ä»–ã®CMSã‚µã‚¤ãƒˆã«ã‚‚ä½¿ç”¨ã™ã‚‹äºˆå®šãŒã‚ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

    MariaDB root ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ Robotama => ClearğŸ”¥

    MariaDB Robotama ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ Robotama => ClearğŸ”¥

    ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã¯ Robotama ã«å¤‰æ›´ã€ Robotama ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©é™è¨­å®š => ClearğŸ”¥

    Apacheã‚‚ Robotama ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•


concretecmsã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šã¯ application/config/database.php

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã®å¤‰æ›´ã¯æ–°è¦ã«ä½œæˆã—ã¦dumpãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æ–°è¦ã«ä½œæˆã—ãŸã»ã†ãŒã„ã„ã‹ã‚‚ => ClearğŸ”¥



ã‚ˆãä½¿ã†MySQLã‚³ãƒãƒ³ãƒ‰&æ§‹æ–‡é›†
https://qiita.com/CyberMergina/items/f889519e6be19c46f5f4#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E4%B8%80%E8%A6%A7%E3%81%AE%E8%A1%A8%E7%A4%BA



< Useræƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥ >

1. Useræƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥

MariaDB [(none)]> select user from mysql.user;
+-------------+
| User        |
+-------------+
| root        |
| root        |
| root        |
| mariadb.sys |
| root        |
+-------------+
5 rows in set (0.001 sec)


2. Useræƒ…å ±ã¨Hostæƒ…å ±ã‚’å–å¾—ã™ã‚‹ğŸ”¥

MariaDB [(none)]> select user, host from mysql.user;
+-------------+-----------+
| User        | Host      |
+-------------+-----------+
| root        | 127.0.0.1 |
| root        | ::1       |
| root        | jcgcms-a  |
| mariadb.sys | localhost |
| root        | localhost |
+-------------+-----------+
5 rows in set (0.001 sec)



3. Userã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ğŸ”¥


    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ–¹æ³•-1
    SET PASSWORD FOR ãƒ¦ãƒ¼ã‚¶å@ãƒ›ã‚¹ãƒˆå=password('æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰');

        => æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã™


    # ç¾åœ¨æ¥ç¶šã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹å ´åˆ
    set password = password('Robotama');


    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ–¹æ³•-2
    mysqladmin password æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -u ãƒ¦ãƒ¼ã‚¶ãƒ¼å -p

        => ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ã‚ªãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§å›²ã‚€å¿…è¦ã¯ãªã„ï¼


    MySQLã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã€ŒSET PASSWORDã€
    https://uxmilk.jp/12396


4. æ–°ã—ã„Userã‚’ä½œæˆã™ã‚‹ğŸ”¥

    æ–°ã—ããƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã¯ã€CREATE USERæ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

        CREATE USER 'ãƒ¦ãƒ¼ã‚¶å'@'ãƒ›ã‚¹ãƒˆå' IDENTIFIED BY 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰';

    ãƒ¦ãƒ¼ã‚¶åã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã¯ã€ä»»æ„ã®æ–‡å­—åˆ—ã‚’è¨­å®šã—ã¦ä¸‹ã•ã„ã€‚ãƒ›ã‚¹ãƒˆåã«ã¯ã€MySQLã¸æ¥ç¶šã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’æŒ‡å®šã—ã¦ä¸‹ã•ã„ã€‚ãƒ›ã‚¹ãƒˆåã®ä»£ã‚ã‚Šã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„localhostã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚


    ã²ã¨ã¾ãšã€Userå&Passwordã ã‘è¨­å®šã™ã‚‹

    CREATE USER Robotama IDENTIFIED BY 'Robotama';

    create user 'Robotama'@'localhost' IDENTIFIED BY 'Robotama';



    MySQLã§ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã—ã€æ¨©é™ã‚’è¨­å®šã™ã‚‹æ–¹æ³•
    https://proengineer.internous.co.jp/content/columnfeature/6638#:~:text=%E6%96%B0%E3%81%97%E3%81%8F%E3%83%A6%E3%83%BC%E3%82%B6%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B,%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E4%B8%8B%E3%81%95%E3%81%84%E3%80%82



4-1. User ã‚’å‰Šé™¤ã™ã‚‹ğŸ”¥
    
    DROP USER CGGS;

    drop user 'CGGS'@'localhost';


5.  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ¨©é™ä»˜ä¸ğŸ”¥

    5-1. æ¨©é™ã®ç¢ºèª
        
        show grants for CGGS;

        show grants for 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å'@'ãƒ›ã‚¹ãƒˆå';

        show grants for 'CGGS'@'localhost';

    5-2. æ¨©é™ã®ä»˜ä¸
    
        GRANT æ¨©é™ ON ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å.ãƒ†ãƒ¼ãƒ–ãƒ«å TO 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å';

        grant all on CGGS.* to CGGS;

        grant all on CGGS.* to 'CGGS'@'localhost';


        GRANT ALL PRIVILEGES ON * . * TO 'CGGS'@'localhost';


    5-3. æ¨©é™ã‚’ä»˜ä¸ã—ãŸå¾Œã®Reload

    FLUSH PRIVILEGES;


    MySQLã§æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¦æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹æ–¹æ³•
    https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql-ja


ã€MySQLå…¥é–€ã€‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã®æ–¹æ³•ã‚’è§£èª¬ï¼8.0ã‹ã‚‰ã®å¤‰æ›´ç‚¹ã‚‚ç´¹ä»‹
https://www.sejuku.net/blog/82303




6. Databaseã®Dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚‹ => Dumpã¯ã€å¤–éƒ¨ã‹ã‚‰å–ã‚Œã‚‹ğŸ”¥

    mysqldump -u [ãƒ¦ãƒ¼ã‚¶ãƒ¼å] -p -x test_db > [å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«å]


    # MariaDBã‹ã‚‰dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ï¼
    mysqldump -u root -p managementdb > managementdb.dump



    mysqldump -u root -p cggs_maria > C:\cggs_maria.dump




    # Dumpãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚‹ğŸ”¥
    mysqldump -u root -p concrete8 > cggs.dump

    # Restoreã™ã‚‹ğŸ”¥
    mysql -u root -p CGGS < C:\COAST_GUARD_GLOBAL_SUMMIT.sql


mysql -u root -p maria_cggs < C:\COAST_GUARD_GLOBAL_SUMMIT.sql


mysqladmin password FwXjueuzNSqc3hoensC2 -u CGGS -p

mysqldump -u root -p CGGS > C:\cggs.dump


7. MySQL ã«DataBaseåæŒ‡å®šã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ğŸ”¥

    mysql -u CGGS -p CGGS




< æœ¬ç•ªç’°å¢ƒã®PassWordé–¢é€£ >


    MariaDB root ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: Robotama

    MariaDB CGGS ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: Robotama

        => *6E6FEC51E20F3B7066FAD309632695A2072EC805

    ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã¯ CGGS ã«å¤‰æ›´ã€ CGGS ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©é™è¨­å®š 

    Apacheã‚‚ CGGS ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•





8. MySQLã§æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¦æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹æ–¹æ³•


CREATE USER 'CGGS'@'127.0.0.1' IDENTIFIED BY 'Robotama';

CREATE USER CGGS@localhost IDENTIFIED BY 'Robotama';

MariaDB [(none)]> CREATE USER CGGS@127.0.0.1 IDENTIFIED BY 'Robotama';
Query OK, 0 rows affected (0.005 sec)





GRANT ALL PRIVILEGES ON * . * TO CGGS@127.0.0.1;

GRANT ALL PRIVILEGES ON * . * TO CGGS@localhost;


FLUSH PRIVILEGES;



MySQLã§æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¦æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹æ–¹æ³•
https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql-ja




# userName, Host, Password ã®ç¢ºèª

MariaDB [(none)]> select user, host, password from mysql.user;
+-------------+-----------+-------------------------------------------+
| User        | Host      | Password                                  |
+-------------+-----------+-------------------------------------------+
| mariadb.sys | localhost |                                           |
| root        | localhost | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | jcgcms-a  | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | 127.0.0.1 | *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B |
| root        | ::1       | *9E1AA81F840662856BA1AFA79A5DB9B99140499C |
+-------------+-----------+-------------------------------------------+
5 rows in set (0.001 sec)




# HostæŒ‡å®šã§ã€æ¥ç¶šå…ˆã‚’æŒ‡å®šã™ã‚‹ğŸ”¥
mysql -u CGGS -p -h 127.0.0.1

mysql -u CGGS -p -h localhost





MariaDBã®ãƒãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹
MariaDBãŒæ¥ç¶šã™ã‚‹ã¨ãã«ä½¿ã†ãƒãƒ¼ãƒˆç•ªå·ã‚’ç¢ºèªã—ã¾ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§ã‚ã‚Œã°ã€3306ã§ã™ã®ã§ã€é£›ã°ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“

mysql > show variables like 'port'

+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| port          | 3306  |
+---------------+-------+




ã€MariaDB/MySQLã€‘å¤–éƒ¨æ¥ç¶šã®è¨­å®šæ–¹æ³•
https://blog.websandbag.com/entry/2018/06/03/223431


--------------------------------------------------------------------------------------------------------------------------------------

MariaDB [(none)]> create database cggs_maria;
Query OK, 1 row affected (0.001 sec)

MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| cggs               |
| cggs_maria         |
| concrete8          |
| concrete859        |
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
8 rows in set (0.001 sec)

MariaDB [(none)]> exit;
Bye



# Restoreã™ã‚‹ğŸ”¥

C:\Users\JCGCMS-AAdmin>mysql -u root -p cggs_maria < C:\Robotama.sql

Enter password: ********************






< å‚è€ƒãƒ»å¼•ç”¨ğŸ”¥ >


ã‚ˆãä½¿ã†MySQLã‚³ãƒãƒ³ãƒ‰&æ§‹æ–‡é›†
https://qiita.com/CyberMergina/items/f889519e6be19c46f5f4#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E4%B8%80%E8%A6%A7%E3%81%AE%E8%A1%A8%E7%A4%BA







