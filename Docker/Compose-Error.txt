
< docker compose ã§ Additional property ã€‡ã€‡ is not allowed ã®ã‚¨ãƒ©ãƒ¼ã®è§£æ±ºæ–¹æ³• >


æ¦‚è¦
docker-compose up -d ã‚’ã—ãŸã‚‰ã€€ã€ŒAdditional property {property} is not allowedã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã®ã§åŸå› ã¨è§£æ±ºç­–ã‚’ç´¹ä»‹ã—ã¾ã™

çµŒç·¯
æ–°ã—ã„Macã«ã€ŒDocker Desktop for Macã€ã‚’å…¥ã‚Œã¦ã€ã„ã– docker-compose up -d ã‚’ã—ãŸã‚‰ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ

è§£æ±ºç­–
dokcer-compose.yaml ã« ã€Œversionã€ã¨ã€Œservicesã€ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸ

ä¿®æ­£å‰
docker-compose.yaml
web:
  image: xxxx
ä¿®æ­£å¾Œ
docker-compose.yaml
version: "3"
services:
  web:
    image: xxxx
åŸå› 
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
ä¸‹è¨˜ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ã¨
https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1ï¼ˆéæ¨å¥¨ï¼‰
Compose files that do not declare a version are considered â€œversion 1â€. In those files, all the services are declared at the root of the document.
Version 1 is supported by Compose up to 1.6.x. It will be deprecated in a future Compose release.

docker-compose.yamlã«versionæŒ‡å®šãŒãªã„ã¨version 1ã¨è§£é‡ˆã•ã‚Œã¾ã™
version 1ã¯docker-compose 1.6.xã¾ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™

Version 2ğŸ”—
Compose files using the version 2 syntax must indicate the version number at the root of the document. All services must be declared under the services key.

dokcer-compose.yamlã«version 2ã‚’æŒ‡å®šã—ãŸå ´åˆã«servicesã®å®£è¨€ãŒå¿…é ˆã§ã™

docker-compose version
ãã“ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸdocker-composeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã¾ã™

$ docker-compose version
Docker Compose version v2.0.0
æ¨å¯Ÿ
æœ€æ–°ã®Dockerã‚’å…¥ã‚ŒãŸã¨ã“ã‚Docker Compose version v2.0.0ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ
docker-compose.yamlã«versionæŒ‡å®šãŒãªã„ã®ã§æœ¬æ¥ãªã‚‰ã°version 1ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹
ãŸã ã€version 1ã¯dokcer-compose 1.6.xã¾ã§ã—ã‹ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚‰ãšversion 2ã¨è§£é‡ˆã•ã‚ŒãŸ(ã¨æ€ã‚ã‚Œã‚‹)
version 2ã§ã¯servicesã®å®£è¨€ãŒå¿…è¦ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ
ãã“ã§ã€docker-compose.yamlã«versionã¨servicesã‚’å®£è¨€ã™ã‚‹ã“ã¨ã§ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆã•ã‚ŒãŸ



docker compose ã§ã€ŒAdditional property {property} is not allowedã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹
https://qiita.com/mida12251141/items/2e07cb332e436e56fcc9




[ Before ]

nodeapp:
    build: "./app-server"
    container_name: "nodeapp"
    working_dir: "/usr/src/app"
    ports:
    - "10080:10080"
    volumes:
    - "./app-server/src:/usr/src/app"
    links:
    - "noderedis"
noderedis:
    image: "redis:3"
    container_name: "noderedis"




[ After ]

version: "3"
services:
  nodeapp:
    build: "./app-server"
    container_name: "nodeapp"
    working_dir: "/usr/src/app"
    ports:
    - "10080:10080"
    volumes:
    - "./app-server/src:/usr/src/app"
    links:
    - "noderedis"
  noderedis:
    image: "redis:3"
    container_name: "noderedis"









