
< MySQL ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰å•é¡ŒğŸ”¥ >

1. Windows ã®å ´åˆã¯ã€Clientãƒ„ãƒ¼ãƒ«ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã«ã‚‚æ³¨æ„ => ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ã€utf-8 ã«ãªã£ã¦ã„ã‚‹ã‹ï¼Ÿ

2. MySQLå´ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ã€utf8mb4 ã«ãªã£ã¦ã„ã‚‹ã‹ï¼Ÿ

3. MySQLå´ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰è¨­å®šã‚’å¤‰æ›´ã—ãŸã‚‰ã€å†èµ·å‹•, Databaseã‚„Tableã¯ã€ä½œã‚Šç›´ã™ğŸ”¥



< Incorrect string value ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã¦ mysqlã§æ—¥æœ¬èªã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ >

    MySQL ã® utf8mb4 = utf8 ã ã¨è€ƒãˆã¦ã„ã„ã€‚


    [ å¼•ç”¨: æ–‡å­—ã‚³ãƒ¼ãƒ‰utf8ã¨ utf8mb4 ã®é•ã„ã¨ã¯ï¼Ÿ ]


    utf8mb4ã¨ã¯ä½•ã‹ã¨è¨€ã„ã¾ã™ã¨ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹MySQLã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¨ãªã‚Šã¾ã™ã€‚

    utf8ã¯1ï½4ãƒã‚¤ãƒˆæ–‡å­—ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã®ã§ã™ãŒã€MySQLã«ãŠã‘ã‚‹utf8ã§ã¯3ãƒã‚¤ãƒˆã¾ã§ã®æ–‡å­—ã—ã‹æ‰±ã†ã“ã¨ãŒã§ããªã„ãŸã‚ã€

    utf8ã®4ãƒã‚¤ãƒˆæ–‡å­—ã«è©²å½“ã™ã‚‹æ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ä½œæˆã•ã‚ŒãŸã®ãŒutf8mb4ã§ã™ã€‚

    æ–‡å­—ã‚³ãƒ¼ãƒ‰utf8ã¨utf8mb4ã®é•ã„ã¨ã¯ï¼Ÿ
    https://aprico-media.com/posts/7908#:~:text=utf8%E3%81%AF1%EF%BD%9E4,%E3%81%9F%E3%81%AE%E3%81%8Cutf8mb4%E3%81%A7%E3%81%99%E3%80%82




# MySQL å´ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰å•é¡Œ & ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ (Clientå´)ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰å•é¡Œ => 2é‡ã§æ–‡å­—ã‚³ãƒ¼ãƒ‰å•é¡ŒğŸ”¥


MySQL [robotamadb]> status
--------------
C:\xampp\mysql\bin\mysql.exe  Ver 15.1 Distrib 10.4.11-MariaDB, for Win64 (AMD64), source revision 7c2c420b70b19cc02b5281127205e876f3919dad

Connection id:          44
Current database:       robotamadb
Current user:           root@localhost
SSL:                    Not in use
Using delimiter:        ;
Server:                 MySQL
Server version:         5.7.36-log MySQL Community Server (GPL)
Protocol version:       10
Connection:             localhost via TCP/IP
Server characterset:    latin1
Db     characterset:    latin1
Client characterset:    cp932
Conn.  characterset:    cp932
TCP port:               3306
Uptime:                 16 days 12 hours 29 min 27 sec

Threads: 1  Questions: 328  Slow queries: 0  Opens: 148  Flush tables: 1  Open tables: 137  Queries per second avg: 0.000
--------------



MySQL [robotamadb]> show variables like "chara%";
+--------------------------+---------------------------------------------------------+
| Variable_name            | Value                                                   |
+--------------------------+---------------------------------------------------------+
| character_set_client     | cp932                                                   |
| character_set_connection | cp932                                                   |
| character_set_database   | latin1                                                  |
| character_set_filesystem | binary                                                  |
| character_set_results    | cp932                                                   |
| character_set_server     | latin1                                                  |
| character_set_system     | utf8                                                    |
| character_sets_dir       | C:\Program Files\MySQL\MySQL Server 5.7\share\charsets\ |
+--------------------------+---------------------------------------------------------+
8 rows in set, 1 warning (0.003 sec)





< Clientå´ã§ã®å¯¾å¿œğŸ”¥ >


[ ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®è¨­å®šğŸ”¥ ]


    CHCP ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

    ã“ã“ã§ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ãŠã‘ã‚‹ CHCP ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚


1. ç¾åœ¨ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹


    ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç¾åœ¨è¨­å®šã•ã‚Œã¦ã„ã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹ã«ã¯å¼•æ•°ãªã—ã§æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

        chcp

    CHCP ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ç¾åœ¨ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚


2. æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹


    ä¾‹ãˆã°ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ä½¿ç”¨ã™ã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ UTF-8 ã«å¤‰æ›´ã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

    chcp 65001

    ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ä½¿ç”¨ã™ã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒ UTF-8 ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚



æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®è¨­å®š(CHCP)
https://www.javadrive.jp/command/display/index5.html




< MySQLå´ã®å¯¾å¿œğŸ”¥ >


å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ãŒutf8mb4ã¨ãªã£ã¦ã„ã‚‹ã¨ã‚ˆã„

    character_set_client
    character_set_connection
    character_set_result

ã§ãã‚Œã°ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§è¨­å®šã—ã¦ãŠããŸã„ã€‚



1. my.ini or my.cnf å´ã®è¨­å®š


    [mysqld]    # mysqld-ã‚°ãƒ«ãƒ¼ãƒ—: MySQL-Server ã®è¨­å®š

    datadir=C:\ProgramData\MySQL\MySQL Server 5.7\Data

    # æ–‡å­—ã‚³ãƒ¼ãƒ‰è¨­å®š
    character-set-server=utf8mb4

    [client]    # client-ã‚°ãƒ«ãƒ¼ãƒ—: mysqlã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã¸ã®è¨­å®š

    port=3306

    # æ–‡å­—ã‚³ãƒ¼ãƒ‰è¨­å®š
    default-character-set=utf8mb4

    [mysqldump] # mysqldump-ã‚°ãƒ«ãƒ¼ãƒ—: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰ã¸ã®è¨­å®š
    default-character-set=utf8



2. å†èµ·å‹•ğŸ”¥



3. Database & Tableã®ä½œæˆ => Tablseä½œæˆæ™‚ã«ã€æ–‡å­—ã‚³ãƒ¼ãƒ‰æŒ‡å®š

 create table `robotama` (
    `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
    `robotama_name` VARCHAR(100) NOT NULL COMMENT "ãƒ­ãƒœç‰ã®åå‰",
    `country` VARCHAR(200) NOT NULL COMMENT "å‡ºèº«åœ°"
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;




[ æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´å¾Œ ]


MySQL [robotamadb]> status
--------------
mysql  Ver 15.1 Distrib 10.4.11-MariaDB, for Win64 (AMD64), source revision 7c2c420b70b19cc02b5281127205e876f3919dad

Connection id:          5
Current database:       robotamadb
Current user:           root@localhost
SSL:                    Not in use
Using delimiter:        ;
Server:                 MySQL
Server version:         5.7.36 MySQL Community Server (GPL)
Protocol version:       10
Connection:             localhost via TCP/IP
Server characterset:    utf8mb4
Db     characterset:    utf8mb4
Client characterset:    utf8
Conn.  characterset:    utf8
TCP port:               3306
Uptime:                 12 min 27 sec

Threads: 1  Questions: 17  Slow queries: 0  Opens: 106  Flush tables: 1  Open tables: 99  Queries per second avg: 0.022
--------------




MySQL [robotamadb]> show variables like "chara%";
+--------------------------+---------------------------------------------------------+
| Variable_name            | Value                                                   |
+--------------------------+---------------------------------------------------------+
| character_set_client     | utf8                                                    |
| character_set_connection | utf8                                                    |
| character_set_database   | utf8mb4                                                 |
| character_set_filesystem | binary                                                  |
| character_set_results    | utf8                                                    |
| character_set_server     | utf8mb4                                                 |
| character_set_system     | utf8                                                    |
| character_sets_dir       | C:\Program Files\MySQL\MySQL Server 5.7\share\charsets\ |
+--------------------------+---------------------------------------------------------+
8 rows in set, 1 warning (0.002 sec)




4. ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ã—ã¦ã¿ã‚‹ğŸ”¥

insert into robotama (robotama_name, country) values ("ãƒ­ãƒœç‰", "ç¥è–ã‚°ãƒ³ãƒãƒ¼å¸å›½");







mysqlã§æ—¥æœ¬èªã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
https://qiita.com/EigenPort_M/items/46bd1bf386eb56eba97e




MySQL CLI ã®æ—¥æœ¬èªæ–‡å­—åŒ–ã‘ã‚’ SET character_set_results=utf8mb4; ã§è§£æ±ºã™ã‚‹
https://codenote.net/mysql/4646.html




MySQLã§æ–‡å­—ã‚³ãƒ¼ãƒ‰ã«è‹¦æˆ¦ã—ã¦ã„ã‚‹äººå‘ã‘ã®ãƒ¡ãƒ¢
https://xn--qiita-oc4dwb.com/yoshi-taka/items/ceb5d14684b93715f1a6










